<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- EleutherIA Design System: Sage Green & Academic Warmth -->
  <defs>
    <!-- Gradient for elegance -->
    <linearGradient id="academicGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fafaf9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f3f7f5;stop-opacity:1" />
    </linearGradient>

    <!-- Shadow filter -->
    <filter id="softShadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
      <feOffset dx="0" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.15"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#769687" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="url(#academicGradient)"/>

  <!-- Title Section -->
  <text x="600" y="50" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="#1c1917" text-anchor="middle">
    GraphRAG Workflow
  </text>
  <text x="600" y="80" font-family="Georgia, serif" font-size="18" fill="#78716c" text-anchor="middle" font-style="italic">
    Hybrid Retrieval-Augmented Generation for Ancient Philosophy
  </text>

  <!-- Greek motto -->
  <text x="600" y="110" font-family="Palatino, serif" font-size="14" fill="#8baf9f" text-anchor="middle">
    ·ºòŒªŒµœÖŒ∏ŒµœÅŒØŒ± (Freedom) + IA (Intelligence Artificielle)
  </text>

  <!-- Step 1: User Query -->
  <g filter="url(#softShadow)">
    <rect x="50" y="160" width="200" height="120" rx="8" fill="#ffffff" stroke="#769687" stroke-width="3"/>
    <circle cx="150" cy="190" r="20" fill="#769687" opacity="0.2"/>
    <text x="150" y="195" font-family="Georgia, serif" font-size="24" fill="#769687" text-anchor="middle" font-weight="bold">1</text>
    <text x="150" y="230" font-family="Georgia, serif" font-size="18" fill="#1c1917" text-anchor="middle" font-weight="bold">
      User Query
    </text>
    <text x="150" y="255" font-family="Georgia, serif" font-size="13" fill="#78716c" text-anchor="middle">
      "What did Aristotle say
    </text>
    <text x="150" y="270" font-family="Georgia, serif" font-size="13" fill="#78716c" text-anchor="middle">
      about free will?"
    </text>
  </g>

  <!-- Arrow 1 -->
  <line x1="250" y1="220" x2="330" y2="220" stroke="#769687" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Step 2: Semantic Search -->
  <g filter="url(#softShadow)">
    <rect x="340" y="160" width="200" height="120" rx="8" fill="#ffffff" stroke="#769687" stroke-width="3"/>
    <circle cx="440" cy="190" r="20" fill="#769687" opacity="0.2"/>
    <text x="440" y="195" font-family="Georgia, serif" font-size="24" fill="#769687" text-anchor="middle" font-weight="bold">2</text>
    <text x="440" y="230" font-family="Georgia, serif" font-size="18" fill="#1c1917" text-anchor="middle" font-weight="bold">
      Vector Search
    </text>
    <text x="440" y="255" font-family="Palatino, serif" font-size="12" fill="#78716c" text-anchor="middle">
      Gemini embeddings
    </text>
    <text x="440" y="270" font-family="Georgia, serif" font-size="12" fill="#8baf9f" text-anchor="middle">
      Top-K semantic matches
    </text>
  </g>

  <!-- Arrow 2 -->
  <line x1="540" y1="220" x2="620" y2="220" stroke="#769687" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Step 3: Graph Traversal -->
  <g filter="url(#softShadow)">
    <rect x="630" y="160" width="200" height="120" rx="8" fill="#ffffff" stroke="#769687" stroke-width="3"/>
    <circle cx="730" cy="190" r="20" fill="#769687" opacity="0.2"/>
    <text x="730" y="195" font-family="Georgia, serif" font-size="24" fill="#769687" text-anchor="middle" font-weight="bold">3</text>
    <text x="730" y="230" font-family="Georgia, serif" font-size="18" fill="#1c1917" text-anchor="middle" font-weight="bold">
      Graph Traversal
    </text>
    <text x="730" y="255" font-family="Georgia, serif" font-size="12" fill="#78716c" text-anchor="middle">
      509 nodes, 820 edges
    </text>
    <text x="730" y="270" font-family="Georgia, serif" font-size="12" fill="#8baf9f" text-anchor="middle">
      Influences &amp; relations
    </text>
  </g>

  <!-- Arrow 3 -->
  <line x1="830" y1="220" x2="910" y2="220" stroke="#769687" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Step 4: Context Assembly -->
  <g filter="url(#softShadow)">
    <rect x="920" y="160" width="200" height="120" rx="8" fill="#ffffff" stroke="#769687" stroke-width="3"/>
    <circle cx="1020" cy="190" r="20" fill="#769687" opacity="0.2"/>
    <text x="1020" y="195" font-family="Georgia, serif" font-size="24" fill="#769687" text-anchor="middle" font-weight="bold">4</text>
    <text x="1020" y="230" font-family="Georgia, serif" font-size="18" fill="#1c1917" text-anchor="middle" font-weight="bold">
      Context Assembly
    </text>
    <text x="1020" y="255" font-family="Georgia, serif" font-size="12" fill="#78716c" text-anchor="middle">
      Rich provenance
    </text>
    <text x="1020" y="270" font-family="Georgia, serif" font-size="12" fill="#8baf9f" text-anchor="middle">
      Ancient sources
    </text>
  </g>

  <!-- Return arrow to LLM -->
  <path d="M 1020 280 L 1020 350 L 600 350 L 600 420" stroke="#769687" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Step 5: LLM Generation -->
  <g filter="url(#softShadow)">
    <rect x="450" y="430" width="300" height="140" rx="8" fill="#769687" stroke="#5d7769" stroke-width="3"/>
    <circle cx="600" cy="470" r="25" fill="#ffffff" opacity="0.3"/>
    <text x="600" y="478" font-family="Georgia, serif" font-size="28" fill="#ffffff" text-anchor="middle" font-weight="bold">5</text>
    <text x="600" y="515" font-family="Georgia, serif" font-size="20" fill="#ffffff" text-anchor="middle" font-weight="bold">
      LLM Generation
    </text>
    <text x="600" y="540" font-family="Georgia, serif" font-size="14" fill="#e2ebe7" text-anchor="middle">
      Claude Sonnet 4 synthesizes context
    </text>
    <text x="600" y="560" font-family="Georgia, serif" font-size="13" fill="#c5d7cf" text-anchor="middle" font-style="italic">
      with ancient source citations
    </text>
  </g>

  <!-- Arrow to Response -->
  <line x1="600" y1="570" x2="600" y2="620" stroke="#769687" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Step 6: Scholarly Response -->
  <g filter="url(#softShadow)">
    <rect x="350" y="630" width="500" height="130" rx="8" fill="#ffffff" stroke="#769687" stroke-width="3"/>
    <circle cx="600" cy="665" r="20" fill="#769687" opacity="0.2"/>
    <text x="600" y="670" font-family="Georgia, serif" font-size="24" fill="#769687" text-anchor="middle" font-weight="bold">6</text>
    <text x="600" y="700" font-family="Georgia, serif" font-size="18" fill="#1c1917" text-anchor="middle" font-weight="bold">
      Scholarly Response with Citations
    </text>
    <text x="600" y="725" font-family="Palatino, serif" font-size="13" fill="#78716c" text-anchor="middle" font-style="italic">
      "Aristotle discusses voluntary action (·ºëŒ∫ŒøœçœÉŒπŒøŒΩ) in Nicomachean Ethics III.1-5..."
    </text>
    <text x="600" y="745" font-family="Georgia, serif" font-size="12" fill="#8baf9f" text-anchor="middle">
      [1] Nicomachean Ethics III.1, 1109b30-35  |  [2] concept_hekousion_voluntary_action
    </text>
  </g>

  <!-- Data Sources (Left side annotation) -->
  <g filter="url(#softShadow)">
    <rect x="50" y="350" width="280" height="180" rx="8" fill="#f3f7f5" stroke="#a8c3b7" stroke-width="2"/>
    <text x="190" y="380" font-family="Georgia, serif" font-size="16" fill="#1c1917" text-anchor="middle" font-weight="bold">
      Data Sources
    </text>
    <line x1="70" y1="390" x2="310" y2="390" stroke="#c5d7cf" stroke-width="1"/>

    <text x="70" y="415" font-family="Georgia, serif" font-size="13" fill="#769687" font-weight="bold">
      üß† Knowledge Graph
    </text>
    <text x="85" y="433" font-family="Georgia, serif" font-size="11" fill="#78716c">
      ‚Ä¢ 509 nodes (persons, arguments, concepts)
    </text>
    <text x="85" y="448" font-family="Georgia, serif" font-size="11" fill="#78716c">
      ‚Ä¢ 820 edges (influences, refutations)
    </text>

    <text x="70" y="475" font-family="Georgia, serif" font-size="13" fill="#769687" font-weight="bold">
      üóÑÔ∏è PostgreSQL Database
    </text>
    <text x="85" y="493" font-family="Georgia, serif" font-size="11" fill="#78716c">
      ‚Ä¢ 289 texts, 35M+ characters
    </text>
    <text x="85" y="508" font-family="Georgia, serif" font-size="11" fill="#78716c">
      ‚Ä¢ Full-text search (Greek/Latin)
    </text>
  </g>

  <!-- Key Features (Right side annotation) -->
  <g filter="url(#softShadow)">
    <rect x="870" y="350" width="280" height="180" rx="8" fill="#f3f7f5" stroke="#a8c3b7" stroke-width="2"/>
    <text x="1010" y="380" font-family="Georgia, serif" font-size="16" fill="#1c1917" text-anchor="middle" font-weight="bold">
      Key Features
    </text>
    <line x1="890" y1="390" x2="1130" y2="390" stroke="#c5d7cf" stroke-width="1"/>

    <text x="890" y="415" font-family="Georgia, serif" font-size="12" fill="#78716c">
      ‚úì Semantic + structural search
    </text>
    <text x="890" y="435" font-family="Georgia, serif" font-size="12" fill="#78716c">
      ‚úì Historical context preservation
    </text>
    <text x="890" y="455" font-family="Georgia, serif" font-size="12" fill="#78716c">
      ‚úì Ancient source citations (1,706 refs)
    </text>
    <text x="890" y="475" font-family="Georgia, serif" font-size="12" fill="#78716c">
      ‚úì Multi-lingual support (Greek/Latin)
    </text>
    <text x="890" y="495" font-family="Georgia, serif" font-size="12" fill="#78716c">
      ‚úì FAIR-compliant metadata
    </text>
    <text x="890" y="515" font-family="Georgia, serif" font-size="12" fill="#78716c">
      ‚úì Streaming responses (real-time)
    </text>
  </g>

  <!-- Footer -->
  <text x="600" y="785" font-family="Georgia, serif" font-size="11" fill="#78716c" text-anchor="middle">
    EleutherIA: Ancient Free Will Database | 4th c. BCE - 6th c. CE | CC BY 4.0
  </text>
</svg>
